<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>8-BIT ESTIMATOR (Offline & DSGVO-konform)</title>
    <style>
      /* HINWEIS: Dieser Code ist DSGVO-konform.
        - Es werden keine externen CSS-Frameworks wie Tailwind CSS geladen.
        - Es werden keine externen Schriftarten wie Google Fonts geladen.
        - Alle Stile sind in diesem <style>-Block enthalten.
        - Die verwendete Schriftart ist eine Standard-Systemschriftart (monospace).
      */

      /* Basis-Reset & Standardwerte */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        /* Standard-Monospace-Schriftarten, die auf den meisten Systemen verfügbar sind. Keine Google Fonts. */
        font-family: 'Consolas', 'Monaco', 'Lucida Console', monospace; 
        background-color: #0d0221; /* Dunkelvioletter/blauer Hintergrund */
        color: #00f0ff; /* Neon-Cyan-Text */
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 1rem;
        text-shadow: 0 0 5px #00f0ff, 0 0 10px #00f0ff; /* Neon-Leuchten für Text */
      }

      /* Spiel-Container */
      .game-container {
        background-color: #241b4f; /* Dunkleres Lila, etwas heller als der Body */
        padding: 1.5rem;
        border-radius: 0.25rem; /* Schärfere Kanten */
        border: 2px solid #ff00ff; /* Neon-Magenta-Rand */
        box-shadow: 0 0 15px #ff00ff, inset 0 0 10px rgba(255, 0, 255, 0.3); /* Neon-Magenta-Leuchten und innerer Schatten */
        width: 100%;
        max-width: 48rem; /* Etwas breiter für Retro-Gefühl */
      }

      /* Überschrift */
      .game-title {
        font-size: 4rem;
        font-weight: 700;
        text-align: center;
        margin-bottom: 2rem;
        color: #ffff00; /* Neon-Gelb */
        text-shadow: 0 0 5px #ffff00, 0 0 10px #ffff00, 0 0 15px #ff00ff; /* Gelbes und magenta Leuchten */
        letter-spacing: 2px;
        line-height: 1.1;
      }

      /* Punkteanzeige */
      .score-area {
        display: flex;
        justify-content: space-around;
        margin-bottom: 1.5rem;
        font-size: 1.125rem;
        font-weight: 600;
      }

      .score-box {
        text-align: center;
        padding: 0.75rem;
        border-radius: 0.25rem;
        border: 1px solid #00f0ff; /* Cyan-Rand */
        width: 9rem;
        background-color: rgba(0, 0, 0, 0.3); /* Halbtransparenter Schwarz */
      }

      .score-label {
         display: block;
         font-size: 0.875rem;
         margin-bottom: 0.25rem;
         color: #ff00ff; /* Neon-Magenta für Labels */
         text-shadow: 0 0 5px #ff00ff;
      }

      .score-value {
        display: block;
        font-size: 1.75rem; /* Größerer Punktewert */
        color: #00ff00; /* Neon-Grün für Punkte */
        text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
      }

      /* Fragenbereich */
      #question-area {
        margin-bottom: 1.5rem;
        padding: 1rem;
        background-color: rgba(0,0,0,0.4);
        border-radius: 0.25rem;
        border: 1px solid #00f0ff;
        min-height: 6rem;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      #question-text {
        font-size: 1.1rem;
        font-weight: 500;
        color: #ffffff; /* Weißer Text für besseren Kontrast */
        text-shadow: 0 0 3px #00f0ff;
        line-height: 1.4;
      }

      /* Eingabebereich */
      #input-area {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      #input-area label {
        display: block;
        font-size: 0.875rem;
        font-weight: 500;
        color: #ff00ff; /* Neon-Magenta */
        margin-bottom: 0.25rem;
        text-shadow: 0 0 5px #ff00ff;
      }

      #input-area input[type="number"] {
        width: 100%;
        padding: 0.6rem 0.75rem;
        border: 1px solid #00f0ff;
        border-radius: 0.25rem;
        background-color: #000000;
        color: #00ff00; /* Neon-Grüner Text im Input */
        font-family: inherit; /* Erbt die Monospace-Schriftart vom Body */
        font-size: 1rem;
        text-shadow: 0 0 3px #00ff00;
      }
      #input-area input[type="number"]::placeholder {
          color: #008f8f; /* Dunkleres Cyan für Platzhalter */
          text-shadow: none;
      }

      #input-area input[type="number"]:focus {
          outline: none;
          border-color: #ffff00; /* Neon-Gelber Fokus-Rand */
          box-shadow: 0 0 10px #ffff00; /* Neon-Gelbes Leuchten bei Fokus */
      }

      /* Button-Bereich */
      .buttons-area {
        text-align: center;
        margin-bottom: 1.5rem;
      }
      .buttons-area button {
          padding: 0.75rem 1.5rem;
          font-weight: 700;
          border-radius: 0.25rem;
          color: #0d0221;
          border: 2px solid;
          cursor: pointer;
          transition: background-color 0.2s ease-in-out, transform 0.1s ease, box-shadow 0.2s ease;
          font-size: 0.9rem;
          margin-left: 0.5rem;
          margin-right: 0.5rem;
          text-shadow: none;
          letter-spacing: 1px;
      }
      .buttons-area button:first-child { margin-left: 0; }
      .buttons-area button:last-child { margin-right: 0; }

      #submit-guess {
        background-color: #00ff00; /* Neon-Grün */
        border-color: #008000;
        box-shadow: 0 0 10px #00ff00;
      }
      #submit-guess:hover {
        background-color: #33ff33;
        box-shadow: 0 0 15px #00ff00, 0 0 20px #00ff00;
        transform: translateY(-2px);
      }

      #next-question {
        background-color: #00f0ff; /* Neon-Cyan */
        border-color: #007c80;
        box-shadow: 0 0 10px #00f0ff;
      }
      #next-question:hover {
        background-color: #33ffff;
        box-shadow: 0 0 15px #00f0ff, 0 0 20px #00f0ff;
        transform: translateY(-2px);
      }

      /* Ergebnisbereich */
      #result-area {
        margin-top: 1.5rem;
        padding: 1rem;
        background-color: rgba(0,0,0,0.3);
        border-radius: 0.25rem;
        border: 1px solid #ffff00;
        text-align: center;
        min-height: 5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #result-text {
        font-size: 1rem;
        font-weight: 500;
        color: #ffff00;
        text-shadow: 0 0 5px #ffff00;
        line-height: 1.5;
      }
      #result-text strong {
           font-weight: 700;
           color: #00ff00; /* Neon-Grün für die Antwort */
           text-shadow: 0 0 5px #00ff00;
      }

      /* Game-Over-Bereich */
      #game-over-area {
        margin-top: 1.5rem;
        padding: 1rem;
        background-color: rgba(0,0,0,0.3);
        border-radius: 0.25rem;
        border: 1px solid #ff0000;
        text-align: center;
      }

      #game-over-area h2 {
        font-size: 1.5rem;
        font-weight: 700;
        color: #ff0000;
        margin-bottom: 0.5rem;
        text-shadow: 0 0 5px #ff0000, 0 0 10px #ff0000;
      }

      #final-score {
        font-size: 1.125rem;
        color: #ff8c00; /* Dunkelorange */
        margin-bottom: 1rem;
        text-shadow: 0 0 5px #ff8c00;
      }

      #restart-game {
        padding: 0.75rem 1.5rem;
        background-color: #ff00ff; /* Neon-Magenta */
        color: #0d0221;
        font-weight: 700;
        border-radius: 0.25rem;
        border: 2px solid #800080;
        cursor: pointer;
        transition: background-color 0.2s ease-in-out, transform 0.1s ease, box-shadow 0.2s ease;
        font-size: 0.9rem;
        text-shadow: none;
        box-shadow: 0 0 10px #ff00ff;
        letter-spacing: 1px;
      }
      #restart-game:hover {
        background-color: #ff33ff;
        box-shadow: 0 0 15px #ff00ff, 0 0 20px #ff00ff;
        transform: translateY(-2px);
      }

      /* Hilfsklassen */
      .hidden {
        display: none !important;
      }

      /* Eigene Nachrichtenbox */
      .message-box-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .message-box-overlay.visible {
        opacity: 1;
        visibility: visible;
      }
      .message-box {
        background-color: #1a1139;
        padding: 2rem;
        border-radius: 0.25rem;
        border: 2px solid #00f0ff;
        box-shadow: 0 0 15px #00f0ff;
        text-align: center;
        max-width: 90%;
        width: 400px;
      }
      #message-box-text {
         font-size: 1rem;
         color: #ffffff;
         text-shadow: 0 0 3px #00f0ff;
      }
      .message-box button {
        margin-top: 1.5rem;
        padding: 0.6rem 1.2rem;
        border-radius: 0.25rem;
        background-color: #00f0ff;
        color: #0d0221;
        font-weight: 700;
        transition: background-color 0.2s ease, transform 0.1s ease;
        border: 1px solid #007c80;
        cursor: pointer;
        font-size: 0.875rem;
        text-shadow: none;
      }
      .message-box button:hover {
        background-color: #33ffff;
        transform: translateY(-1px);
      }

      /* Responsive Design */
      @media (min-width: 768px) {
        .game-title {
          font-size: 5rem;
        }
        .score-area {
          font-size: 1.25rem;
        }
        .score-box {
          padding: 1rem;
          width: 11rem;
        }
         .score-label {
             font-size: 1rem;
         }
         .score-value {
             font-size: 2rem;
         }
        #question-text {
          font-size: 1.25rem;
        }
        #input-area {
          grid-template-columns: 1fr 1fr;
          gap: 1.5rem;
        }
         .buttons-area button {
             padding: 0.8rem 1.8rem;
             font-size: 1rem;
         }
         #result-text {
             font-size: 1.125rem;
         }
         #game-over-area {
             padding: 1.5rem;
         }
         #game-over-area h2 {
             font-size: 1.75rem;
         }
         #final-score {
             font-size: 1.25rem;
         }
         #restart-game {
             padding: 0.8rem 1.8rem;
             font-size: 1rem;
         }
         #message-box-text {
             font-size: 1.125rem;
         }
         .message-box button {
             font-size: 1rem;
         }
      }

    </style>
</head>
<body>
    <div class="game-container">
        
        <h1 class="game-title">8-BIT ESTIMATOR</h1>

        <div class="score-area">
            <div class="score-box">
                <span class="score-label">Player ONE</span>
                <span id="score1" class="score-value">0</span>
            </div>
            <div class="score-box">
                <span class="score-label">Player TWO</span>
                <span id="score2" class="score-value">0</span>
            </div>
        </div>

        <div id="question-area">
            <p id="question-text">Frage wird geladen...</p>
        </div>

        <div id="input-area">
            <div>
                <label for="guess1">Player ONE Schätzung:</label>
                <input type="number" id="guess1" name="guess1" placeholder="Deine Schätzung">
            </div>
            <div>
                <label for="guess2">Player TWO Schätzung:</label>
                <input type="number" id="guess2" name="guess2" placeholder="Deine Schätzung">
            </div>
        </div>

        <div class="buttons-area">
            <button id="submit-guess">
                SCHÄTZEN!
            </button>
            <button id="next-question" class="hidden">
                NÄCHSTE FRAGE
            </button>
        </div>

        <div id="result-area" class="hidden">
            <p id="result-text"></p>
        </div>

        <div id="game-over-area" class="hidden">
            <h2>GAME OVER!</h2>
            <p id="final-score"></p>
            <button id="restart-game">
                NEUES SPIEL?
            </button>
        </div>
    </div>

    <div id="message-box-overlay" class="message-box-overlay">
        <div class="message-box">
            <p id="message-box-text"></p>
            <button id="message-box-ok">OK</button>
        </div>
    </div>

    <script>
        // --- Spieldaten ---
        const allQuestions = [
            // Deutschland
            { question: "Wie viele Bundesländer hat Deutschland?", answer: 16 },
            { question: "Wie hoch ist die Zugspitze in Metern?", answer: 2962 },
            { question: "Wie viele Einwohner hat Berlin (in Millionen, gerundet)?", answer: 4 },
            { question: "Fläche von Deutschland in Tausend Quadratkilometern (gerundet)?", answer: 357 },
            { question: "Wie viele Nachbarländer hat Deutschland?", answer: 9 },
            { question: "In welchem Jahr wurde die Bundesrepublik Deutschland gegründet?", answer: 1949 },
            { question: "Länge des Rheins in Deutschland in km (ca.)?", answer: 865 },
            { question: "Wie viele Zeichen hat die deutsche Nationalhymne (nur Text, 3. Strophe)?", answer: 148 },
            { question: "Durchschnittliche Lebenserwartung in Deutschland in Jahren (ca.)?", answer: 81 },
            { question: "Wie viele zugelassene PKW gab es in Deutschland 2023 (in Millionen, gerundet)?", answer: 49 },
            { question: "Wie viele Kontinente gibt es?", answer: 7 },
            { question: "Wie hoch ist der Mount Everest in Metern?", answer: 8848 },
            { question: "Wie lang ist der Nil in Kilometern (gerundet)?", answer: 6650 },
            { question: "Einwohnerzahl von Tokio in Millionen (Metropolregion, gerundet)?", answer: 37 },
            { question: "Wie viele Ozeane gibt es auf der Erde?", answer: 5 },
            { question: "Fläche von Russland in Millionen Quadratkilometern (gerundet)?", answer: 17 },
            { question: "Wie viele Länder gibt es auf der Welt (ca.)?", answer: 195 },
            { question: "Tiefster Punkt der Erde (Marianengraben) in Metern?", answer: 10994 },
            { question: "Durchmesser des Äquators in Kilometern (ca.)?", answer: 12756 },
            { question: "Wie viele Zeitzonen gibt es auf der Erde?", answer: 24 },
            { question: "In welchem Jahr fiel die Berliner Mauer?", answer: 1989 },
            { question: "In welchem Jahr entdeckte Kolumbus Amerika?", answer: 1492 },
            { question: "Wie lange dauerte der Dreißigjährige Krieg (in Jahren)?", answer: 30 },
            { question: "In welchem Jahr begann der Erste Weltkrieg?", answer: 1914 },
            { question: "In welchem Jahr landete der erste Mensch auf dem Mond?", answer: 1969 },
            { question: "Wie alt wurde die ägyptische Königin Kleopatra (in Jahren)?", answer: 39 },
            { question: "In welchem Jahrhundert fand die Französische Revolution statt?", answer: 18 },
            { question: "Wie lange regierte Queen Victoria von England (in Jahren)?", answer: 63 },
            { question: "In welchem Jahr wurde das Römische Reich geteilt?", answer: 395 },
            { question: "Wie viele Thesen veröffentlichte Martin Luther?", answer: 95 },
            { question: "Was ist die ungefähre Temperatur auf der Sonnenoberfläche in Grad Celsius?", answer: 5500 },
            { question: "Wie viele Knochen hat ein erwachsener Mensch?", answer: 206 },
            { question: "Siedepunkt von Wasser in Grad Celsius bei Normaldruck?", answer: 100 },
            { question: "Ungefähre Schallgeschwindigkeit in Luft in m/s?", answer: 343 },
            { question: "Wie viele Planeten hat unser Sonnensystem?", answer: 8 },
            { question: "Lichtgeschwindigkeit im Vakuum in km/s (gerundet)?", answer: 300000 },
            { question: "Wie viele Elemente gibt es im Periodensystem (Stand 2023)?", answer: 118 },
            { question: "Ungefährer pH-Wert von reinem Wasser?", answer: 7 },
            { question: "Wie viele Chromosomenpaare hat ein Mensch?", answer: 23 },
            { question: "In welchem Jahr wurde das erste iPhone vorgestellt?", answer: 2007 },
            { question: "Wie viele Beine hat eine Spinne?", answer: 8 },
            { question: "Wie schnell kann ein Gepard rennen (in km/h)?", answer: 110 },
            { question: "Wie viele Herzen hat ein Oktopus?", answer: 3 },
            { question: "Maximales Alter einer Riesenschildkröte in Jahren (ca.)?", answer: 150 },
            { question: "Wie viele Flügel hat eine Biene?", answer: 4 },
            { question: "Wie hoch kann ein Floh im Verhältnis zu seiner Körpergröße springen (Faktor)?", answer: 100 },
            { question: "Wie viele Mägen hat eine Kuh?", answer: 4 },
            { question: "Durchschnittliche Tragzeit eines Elefanten in Monaten?", answer: 22 },
            { question: "Wie viele Stacheln hat ein Igel durchschnittlich?", answer: 6000 },
            { question: "Wie viele Liter Wasser kann ein Kamel auf einmal trinken (ca.)?", answer: 150 },
            { question: "Wie viele Spieler hat eine Fußballmannschaft auf dem Feld?", answer: 11 },
            { question: "Wie lang ist ein Marathonlauf in Kilometern (gerundet)?", answer: 42 },
            { question: "Wie viele Runden hat ein Formel-1-Rennen in Monaco (ca.)?", answer: 78 },
            { question: "Wie viele Punkte ist ein Touchdown im American Football wert?", answer: 6 },
            { question: "Wie hoch hängt ein Basketballkorb (in Metern)?", answer: 3 },
            { question: "Wie viele Löcher hat ein Standard-Golfplatz?", answer: 18 },
            { question: "Wie oft gewann Deutschland die Fußball-Weltmeisterschaft der Männer?", answer: 4 },
            { question: "Wie viele Sätze braucht man, um ein Tennis-Match bei den Herren Grand Slams zu gewinnen?", answer: 3 },
            { question: "Wie viele Kegel gibt es beim Bowling?", answer: 10 },
            { question: "Wie lange dauert ein Drittel im Eishockey (in Minuten)?", answer: 20 },
            { question: "Wie viele Felder hat ein Schachbrett?", answer: 64 },
            { question: "Wie viele Karten hat ein Standard-Skatblatt?", answer: 32 },
            { question: "Wie viele Oscars gewann der Film 'Titanic' (1997)?", answer: 11 },
            { question: "Wie viele Harry Potter Bücher gibt es?", answer: 7 },
            { question: "Wie viele Saiten hat eine Standard-Gitarre?", answer: 6 },
            { question: "Wie viele Staffeln hat die Serie 'Friends'?", answer: 10 },
            { question: "Wie viele Tasten hat ein Standard-Klavier?", answer: 88 },
            { question: "In welchem Jahr wurde die erste Star Wars Episode (IV) veröffentlicht?", answer: 1977 },
            { question: "Wie viele Spieler braucht man für eine Skatrunde?", answer: 3 },
            { question: "Wie viele Punkte hat der höchste Würfel beim Kniffel (Yahtzee)?", answer: 50 },
            { question: "Wie viele Zähne hat ein erwachsener Mensch normalerweise?", answer: 32 },
            { question: "Wie viele Tage hat ein Schaltjahr?", answer: 366 },
            { question: "Wie viele Sekunden hat eine Stunde?", answer: 3600 },
            { question: "Wie viele Milliliter passen in einen Liter?", answer: 1000 },
            { question: "Wie viele Ecken hat ein Würfel?", answer: 8 },
            { question: "Wie viele Farben hat ein Regenbogen traditionell?", answer: 7 },
            { question: "Wie viele Wochen hat ein Jahr (gerundet)?", answer: 52 },
            { question: "Wie viele Buchstaben hat das deutsche Alphabet (ohne Umlaute/ß)?", answer: 26 },
            { question: "Standard-Trinkgeld in Prozent in Deutschland (ca.)?", answer: 10 },
            { question: "Wie viele Nullen hat eine Milliarde?", answer: 9 },
            { question: "Wie viele Monde hat der Mars?", answer: 2 },
            { question: "In welchem Jahr wurde Google gegründet?", answer: 1998 },
            { question: "Wie viele Figuren sind beim Schach auf dem Brett?", answer: 32 },
            { question: "Wie viele Ringe hat das Audi-Logo?", answer: 4 },
            { question: "Wie viele Streifen hat die Flagge der USA?", answer: 13 },
            { question: "Wie viele Kanten hat ein Tetraeder?", answer: 6 },
            { question: "Wie viele Weltwunder der Antike gab es?", answer: 7 },
            { question: "Wie viele Stunden Schlaf braucht ein Erwachsener durchschnittlich pro Nacht?", answer: 8 },
            { question: "Wie viele Oscars gewann Meryl Streep (Stand 2023)?", answer: 3 },
            { question: "Wie viele Planeten in unserem Sonnensystem haben Ringe?", answer: 4 },
            { question: "Wie viele Freiheitsgrade hat ein starrer Körper im Raum?", answer: 6 },
            { question: "Wie viele Kammern hat das menschliche Herz?", answer: 4 },
            { question: "Wie viele Töne hat eine Oktave (diatonisch)?", answer: 8 },
            { question: "Wie viele Beine hat ein Tausendfüßler maximal (ca.)?", answer: 750 },
            { question: "Wie viele Liter Bier werden in Deutschland pro Kopf jährlich getrunken (ca.)?", answer: 90 },
            { question: "Wie lautet Pi auf 2 Nachkommastellen (Format X.YY -> 314 für 3.14)?", answer: 314 },
            { question: "Wie viele Weihnachtsbäume werden in Deutschland jährlich verkauft (in Millionen, ca.)?", answer: 30 },
            { question: "Wie viele Muskeln braucht man zum Lächeln (ca.)?", answer: 17 },
            { question: "Wie viele Sprachen werden auf der Welt gesprochen (ca.)?", answer: 7000 },
            { question: "Wie viele Meter misst ein olympisches Schwimmbecken in der Länge?", answer: 50 }
        ];

        // --- Spielzustand ---
        let currentQuestionIndex = 0;
        let score1 = 0; // Punktestand für Spieler EINS
        let score2 = 0; // Punktestand für Spieler ZWEI
        let questionsOrder = [];

        // --- DOM-Elemente ---
        const questionTextElement = document.getElementById('question-text');
        const guess1Element = document.getElementById('guess1');
        const guess2Element = document.getElementById('guess2');
        const submitButton = document.getElementById('submit-guess');
        const nextButton = document.getElementById('next-question');
        const resultArea = document.getElementById('result-area');
        const resultTextElement = document.getElementById('result-text');
        const score1Element = document.getElementById('score1');
        const score2Element = document.getElementById('score2');
        const gameOverArea = document.getElementById('game-over-area');
        const finalScoreElement = document.getElementById('final-score');
        const restartButton = document.getElementById('restart-game');
        const inputArea = document.getElementById('input-area');
        const messageBoxOverlay = document.getElementById('message-box-overlay');
        const messageBoxText = document.getElementById('message-box-text');
        const messageBoxOk = document.getElementById('message-box-ok');

        // --- Hilfsfunktionen ---
        function showMessage(message) {
            messageBoxText.textContent = message;
            messageBoxOverlay.classList.add('visible');
        }
        function hideMessage() {
            messageBoxOverlay.classList.remove('visible');
        }
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- Spiellogik-Funktionen ---
        function displayQuestion() {
            if (currentQuestionIndex < questionsOrder.length) {
                const questionIndex = questionsOrder[currentQuestionIndex];
                questionTextElement.textContent = allQuestions[questionIndex].question;
                resultArea.classList.add('hidden');
                resultTextElement.innerHTML = '';
                guess1Element.value = '';
                guess2Element.value = '';
                guess1Element.disabled = false;
                guess2Element.disabled = false;
                submitButton.classList.remove('hidden');
                nextButton.classList.add('hidden');
                inputArea.classList.remove('hidden');
                gameOverArea.classList.add('hidden');
                guess1Element.focus();
            } else {
                endGame();
            }
        }
        function handleSubmit() {
            const guess1 = parseInt(guess1Element.value);
            const guess2 = parseInt(guess2Element.value);
            if (isNaN(guess1) || isNaN(guess2)) {
                showMessage("Bitte gebt beide eine gültige Zahl als Schätzung ein.");
                return;
            }
            const questionIndex = questionsOrder[currentQuestionIndex];
            const correctAnswer = allQuestions[questionIndex].answer;
            const diff1 = Math.abs(guess1 - correctAnswer);
            const diff2 = Math.abs(guess2 - correctAnswer);

            let resultMessage = `Die richtige Antwort ist: <strong>${correctAnswer}</strong>.<br>`;
            if (diff1 < diff2) {
                score1++;
                resultMessage += `Player ONE gewinnt diese Runde! (Schätzung: ${guess1}, Differenz: ${diff1} vs ${diff2})`;
            } else if (diff2 < diff1) {
                score2++;
                resultMessage += `Player TWO gewinnt diese Runde! (Schätzung: ${guess2}, Differenz: ${diff2} vs ${diff1})`;
            } else {
                score1++;
                score2++;
                resultMessage += `Unentschieden! Beide Player waren gleich nah dran (Differenz: ${diff1}). Beide bekommen einen Punkt!`;
            }
            score1Element.textContent = score1;
            score2Element.textContent = score2;
            resultTextElement.innerHTML = resultMessage;
            resultArea.classList.remove('hidden');
            guess1Element.disabled = true;
            guess2Element.disabled = true;
            submitButton.classList.add('hidden');
            if (currentQuestionIndex < questionsOrder.length - 1) {
                nextButton.classList.remove('hidden');
                nextButton.focus();
            } else {
                setTimeout(endGame, 3000); 
            }
        }
        function handleNextQuestion() {
            currentQuestionIndex++;
            displayQuestion();
        }
        function endGame() {
            questionTextElement.textContent = "SPIEL BEENDET!";
            inputArea.classList.add('hidden');
            submitButton.classList.add('hidden');
            nextButton.classList.add('hidden');
            resultArea.classList.add('hidden');
            gameOverArea.classList.remove('hidden');
            let finalMessage = '';
            if (score1 > score2) {
                finalMessage = `Player ONE gewinnt mit ${score1} zu ${score2} Punkten! GLÜCKWUNSCH!`;
            } else if (score2 > score1) {
                finalMessage = `Player TWO gewinnt mit ${score2} zu ${score1} Punkten! GLÜCKWUNSCH!`;
            } else {
                finalMessage = `Unentschieden mit ${score1} zu ${score1} Punkten! GUT GESPIELT!`;
            }
            finalScoreElement.textContent = finalMessage;
            restartButton.focus();
        }
        function initializeGame() {
            currentQuestionIndex = 0;
            score1 = 0;
            score2 = 0;
            score1Element.textContent = score1;
            score2Element.textContent = score2;
            let allIndices = Array.from(allQuestions.keys());
            shuffleArray(allIndices);
            questionsOrder = allIndices.slice(0, 10); // Wählt 10 zufällige Fragen aus
            displayQuestion();
        }

        // --- Event Listeners ---
        submitButton.addEventListener('click', handleSubmit);
        nextButton.addEventListener('click', handleNextQuestion);
        restartButton.addEventListener('click', initializeGame);
        messageBoxOk.addEventListener('click', hideMessage);
        
        // Erlaube das Absenden mit der Enter-Taste in den Input-Feldern
        guess1Element.addEventListener('keyup', function(event) {
            if (event.key === "Enter") {
                submitButton.click();
            }
        });
        guess2Element.addEventListener('keyup', function(event) {
            if (event.key === "Enter") {
                submitButton.click();
            }
        });


        // --- Spielstart ---
        window.onload = initializeGame;
    </script>
</body>
</html>
